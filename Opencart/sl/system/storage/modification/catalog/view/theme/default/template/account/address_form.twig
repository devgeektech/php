{{ header }}
<div id="account-address" class="container">
  <ul class="breadcrumb">
    {% for breadcrumb in breadcrumbs %}
    <li><a href="{{ breadcrumb.href }}">{{ breadcrumb.text }}</a></li>
    {% endfor %}
  </ul>
  <div class="row">{{ column_left }}
    {% if column_left and column_right %}
    {% set class = 'col-sm-6' %}
    {% elseif column_left or column_right %}
    {% set class = 'col-sm-9' %}
    {% else %}
    {% set class = 'col-sm-12' %}
    {% endif %}
    <div id="content" class="{{ class }}">{{ content_top }}
      <h2>{{ text_address }}</h2>
      <form action="{{ action }}" method="post" enctype="multipart/form-data" class="form-horizontal">

	            <!-- Extendons - Checkout Manager -->
	            	<!-- when you insert new address, this below code will run -->
		            {% if my_input_fields is defined and my_input_fields is not empty %}
		                {% for field in my_input_fields %}

		                    {% if field.field_input_type == 'text' and (8 in field.field_to_show) %}
				                {% if field.field_name != 'email' %} {% if field.field_name != 'telephone' %}
			                    	{% if (field.field_visibility != 0 and 2 in field.field_visibility) %}
			                    		<input type="hidden" name="{{ (field.field_existance == 'default') ? field.field_name : 'billing_address[' ~ field.field_name ~ ']' }}" id="{{ field.field_id }}" value="" />
			                        {% else %}
				                    	<div class="form-group col-sm-12 {{ field.field_condition }}" style="width:{{ field.field_width }}%">
				                            <label class="col-sm-2 control-label" for="{{ field.field_id }}">{{ field.field_label }}</label>
				                            <div class="col-sm-10">
				                                <input
				                                	type="text"
				                                    name="{{ (field.field_existance == 'default') ? field.field_name : 'billing_address[' ~ field.field_name ~ ']' }}" value=""
				                                    placeholder="{{ field.field_placeholder }}"
				                                    id="{{ field.field_id }}"
				                                    class="form-control"
						                            {{ (field.field_condition == 'required') ? 'required' : '' }} />
				                            </div>
				                        </div>
			                        {% endif %}
		                        {% endif %} {% endif %}

		                    {% elseif field.field_input_type == 'date' and (8 in field.field_to_show) %}

		                    	{% if (field.field_visibility != 0 and 2 in field.field_visibility) %}
		                    		<input type="hidden" name="{{ (field.field_existance == 'default') ? field.field_name : 'billing_address[' ~ field.field_name ~ ']' }}" id="{{ field.field_id }}" value="" />
		                        {% else %}
			                        <div class="form-group col-sm-12 {{ field.field_condition }}" style="width:{{ field.field_width }}%">
			                            <label class="col-sm-2 control-label" for="{{ field.field_id }}">{{ field.field_label }}</label>
			                            <div class="col-sm-10">
			                                <div class="input-group date" >
			                                    <input type="text"
			                                        name="{{ (field.field_existance == 'default') ? field.field_name : 'billing_address[' ~ field.field_name ~ ']' }}"
			                                        value=""
			                                        placeholder="YYYY-MM-DD"
			                                        id="{{ field.field_id }}"
			                                        class="form-control"
			                                        data-date-format="YYYY-MM-DD"
					                            	{{ (field.field_condition == 'required') ? 'required' : '' }}
			                                    /><span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span>
			                                </div>
			                            </div>
			                        </div>
		                        {% endif %}

		                    {% elseif field.field_input_type == 'time' and (8 in field.field_to_show) %}

		                    	{% if (field.field_visibility != 0 and 2 in field.field_visibility) %}
		                    		<input type="hidden" name="{{ (field.field_existance == 'default') ? field.field_name : 'billing_address[' ~ field.field_name ~ ']' }}" id="{{ field.field_id }}" value="" />
		                        {% else %}
			                        <div class="form-group col-sm-12 {{ field.field_condition }}" style="width:{{ field.field_width }}%">
			                            <label class="col-sm-2 control-label" for="{{ field.field_id }}">{{ field.field_label }}</label>
			                            <div class="col-sm-10">
			                                <div class="input-group time" >
			                                    <input type="text"
			                                        name="{{ (field.field_existance == 'default') ? field.field_name : 'billing_address[' ~ field.field_name ~ ']' }}"
			                                        value=""
			                                        placeholder="HH:mm"
			                                        id="{{ field.field_id }}"
			                                        class="form-control"
			                                        data-date-format="HH:mm"
					                            	{{ (field.field_condition == 'required') ? 'required' : '' }}
			                                    /><span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span>
			                                </div>
			                            </div>
			                        </div>
		                        {% endif %}

		                    {% elseif field.field_input_type == 'datetime' and (8 in field.field_to_show) %}

		                    	{% if (field.field_visibility != 0 and 2 in field.field_visibility) %}
		                    		<input type="hidden" name="{{ (field.field_existance == 'default') ? field.field_name : 'billing_address[' ~ field.field_name ~ ']' }}" id="{{ field.field_id }}" value="" />
		                        {% else %}
			                        <div class="form-group col-sm-12 {{ field.field_condition }}" style="width:{{ field.field_width }}%">
			                            <label class="col-sm-2 control-label" for="{{ field.field_id }}">{{ field.field_label }}</label>
			                            <div class="col-sm-10">
			                                <div class="input-group datetime">
			                                    <input type="text"
			                                        name="{{ (field.field_existance == 'default') ? field.field_name : 'billing_address[' ~ field.field_name ~ ']' }}"
			                                        value=""
			                                        placeholder="YYYY-MM-DD HH:mm"
			                                        id="{{ field.field_id }}"
			                                        class="form-control"
			                                        data-date-format="YYYY-MM-DD HH:mm"
					                            	{{ (field.field_condition == 'required') ? 'required' : '' }}
			                                    /><span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span>
			                                </div>
			                            </div>
			                        </div>
		                        {% endif %}

		                    {% elseif field.field_input_type == 'textarea' and (8 in field.field_to_show) %}

		                        <div class="form-group col-sm-12 {{ field.field_condition }}" style="width:{{ field.field_width }}%">
		                            <label class="col-sm-2 control-label" for="{{ field.field_id }}">{{ field.field_label }}</label>
		                            <div class="col-sm-10">
		                                <textarea cols="3"
		                                    name="{{ (field.field_existance == 'default') ? field.field_name : 'billing_address[' ~ field.field_name ~ ']' }}"
		                                    id="{{ field.field_id }}"
		                                    class="form-control"
		                                    placeholder="{{ field.field_placeholder }}"
				                            {{ (field.field_condition == 'required') ? 'required' : '' }}
		                                ></textarea>
		                            </div>
		                        </div>

		                    {% elseif field.field_input_type == 'radio' and (8 in field.field_to_show) %}

		                        <div class="form-group col-sm-12 {{ field.field_condition }}" style="width:{{ field.field_width }}%">
		                            <label class="col-sm-2 control-label" for="{{ field.field_id }}">{{ field.field_label }}</label>
		                            <div class="col-sm-10">
		                                    <!-- send required condition in hidden field -->
		                                    {% if (field.field_condition == 'required') %}
		                                        <input type="hidden" name="billing_address[{{ field.field_name }}]" value="{{ field.field_condition }}">
		                                    {% endif %}
					                        {% if field.field_options is not empty %}
						                        {% for option in field.field_options %}
						                        		<label class="radio-inline">
							                                <input type="radio"
							                                    name="billing_address[{{ field.field_name }}]"
							                                    value="{{ option.op_value }}"
							                                    {{ (option['default_value'] == 'selected') ? 'checked="checked"' : '' }}
							                                />
							                                {{ option.op_name }}
							                            </label>
						                        {% endfor %}
					                        {% endif %}
		                            </div>
		                        </div>

		                    {% elseif field.field_input_type == 'checkbox' and (8 in field.field_to_show) %}

		                        <div class="form-group col-sm-12 {{ field.field_condition }}" style="width:{{ field.field_width }}%">
		                            <label class="col-sm-2 control-label" for="{{ field.field_id }}">{{ field.field_label }}</label>
		                            <div class="col-sm-10">
		                                <!-- send hidden value, when checkbox has not been checked and is required, this is because when checkbox is required and it is not checked, then it doesn't send even name of the checkbox field to controller to check validation -->
		                                {% if (field.field_condition == 'required') %}
		                                    <input type="hidden" name="billing_address[{{ field.field_name }}]" value="{{ field.field_condition }}">
		                                {% endif %}
				                        {% if field.field_options is not empty %}
					                        {% for option in field.field_options %}
					                        		<label class="checkbox-inline">
						                                <input type="checkbox"
						                                    name="{{ (field.field_existance == 'default') ? field.field_name : 'billing_address[' ~ field.field_name ~ ']' }}[]"
						                                    value="{{ option.op_value }}"
						                                    {{ (option['default_value'] == 'selected') ? 'checked="checked"' : '' }}
						                                />
						                                {{ option.op_name }}
						                            </label>
					                        {% endfor %}
				                        {% endif %}
		                            </div>
		                        </div>

		                    {% elseif field.field_input_type == 'select' and (8 in field.field_to_show) %}
		                           
		                        <div class="form-group col-sm-12 {{ field.field_condition }}" style="width:{{ field.field_width }}%">
		                            <label class="col-sm-2 control-label" for="{{ field.field_id }}">{{ field.field_label }}</label>
		                            <div class="col-sm-10">
		                                <select 
		                                	name="{{ (field.field_existance == 'default') ? field.field_name : 'billing_address[' ~ field.field_name ~ ']' }}"
		                                	id="{{ field.field_id }}"
		                                	class="form-control"
				                            {{ (field.field_condition == 'required') ? 'required' : '' }} >
		                                    <!-- here is the default fields of country, zone etc -->
		                                    {% if (field.field_name == 'country_id') %}
		                                        <option value="">{{ text_select }}</option>
		                                        {% for country in countries %}
		                                            {% if (country['country_id'] == country_id) %}
		                                                <option value="{{ country['country_id'] }}" selected="selected">{{ country['name'] }}</option>
		                                            {% else %}
		                                                <option value="{{ country['country_id'] }}">{{ country['name'] }}</option>
		                                            {% endif %}
		                                        {% endfor %}
		                                    {% else %}
							                        {% if field.field_options is not empty %}
								                        {% for option in field.field_options %}
									                            <option value="{{ option.op_value }}" {{ (option['default_value'] == 'selected') ? 'selected="selected"' : '' }}>{{ option.op_name }}</option>
								                        {% endfor %}
							                        {% endif %}
		                                    {% endif %}
		                                </select>
		                            </div>
		                        </div>

		                    {% elseif field.field_input_type == 'multi-select' and (8 in field.field_to_show) %}
		                           
		                        <div class="form-group col-sm-12 {{ field.field_condition }}" style="width:{{ field.field_width }}%">
		                            <label class="col-sm-2 control-label" for="{{ field.field_id }}">{{ field.field_label }}</label>
		                            <div class="col-sm-10">
		                                <select
		                                    multiple="multiple"
		                                    name="{{ (field.field_existance == 'default') ? field.field_name : 'billing_address[' ~ field.field_name ~ ']' }}[]"
		                                    id="{{ field.field_id }}"
		                                    class="form-control"
				                            {{ (field.field_condition == 'required') ? 'required' : '' }} >
					                        {% if field.field_options is not empty %}
						                        {% for option in field.field_options %}
							                            <option value="{{ option.op_value }}" {{ (option['default_value'] == 'selected') ? 'selected="selected"' : '' }}>{{ option.op_name }}</option>
						                        {% endfor %}
					                        {% endif %}
		                                </select>
		                            </div>
		                        </div>

		                    {% elseif field.field_input_type == 'file' and (8 in field.field_to_show) %}

		                        <div class="form-group col-sm-12 {{ field.field_condition }}" style="width:{{ field.field_width }}%">
		                            <label class="col-sm-2 control-label" for="{{ field.field_id }}">{{ field.field_label }}</label>
		                            <div class="col-sm-10">
		                                <input type="file"
		                                    name="{{ (field.field_existance == 'default') ? field.field_name : 'billing_address[' ~ field.field_name ~ ']' }}"
		                                    value=""
		                                    id="{{ field.field_id }}"
		                                    class="form-control"
		                                    accept="application/msword, application/vnd.ms-excel, application/vnd.ms-powerpoint, text/plain, application/pdf"
				                            {{ (field.field_condition == 'required') ? 'required' : '' }} />
		                            </div>
		                        </div>

		                    {% elseif field.field_input_type == 'image' and (8 in field.field_to_show) %}

		                        <div class="form-group col-sm-12 {{ field.field_condition }}" style="width:{{ field.field_width }}%">
		                            <label class="col-sm-2 control-label" for="{{ field.field_id }}">{{ field.field_label }}</label>
		                            <div class="col-sm-10">
		                                <input type="file"
		                                    name="{{ (field.field_existance == 'default') ? field.field_name : 'billing_address[' ~ field.field_name ~ ']' }}"
		                                    value=""
		                                    placeholder="{{ field.field_placeholder }}"
		                                    id="{{ field.field_id }}"
		                                    class="form-control"
		                                    accept="image/*"
				                            {{ (field.field_condition == 'required') ? 'required' : '' }} />
		                            </div>
		                        </div>
		                    {% endif %}
		                {% endfor %}
		                
		            <!-- when you edit existing address, this code will run -->
		            {% elseif (update_my_custom_address is defined and update_my_custom_address is not empty) %}

		                {% for field in update_my_custom_address %}

		                        {% if field.field_input_type == 'text' and (8 in field.field_to_show) %}
				                	{% if field.field_name != 'email' %} {% if field.field_name != 'telephone' %}
				                    	{% if (field.field_visibility != 0 and 2 in field.field_visibility) %}
				                    		<input type="hidden" name="{{ (field.field_existance == 'default') ? field.field_name : 'billing_address[' ~ field.field_name ~ ']' }}" id="{{ field.field_id }}" value="" />
				                        {% else %}
		                                    <div class="form-group col-sm-12 {{ field.field_condition }}" style="width:{{ field.field_width }}%">
			                                    <label class="col-sm-2 control-label" for="{{ field.field_id }}">{{ field.field_label }}</label>
		                                        <div class="col-sm-10">
		                                            <input type="text" 
		                                                name="{{ (field.field_existance == 'default') ? field.field_name : 'billing_address[' ~ field.field_name ~ ']' }}"
		                                                {% if field.my_custom_address is defined %}
		                                                    {% for f_key, f_val in field.my_custom_address %}
		                                                        {% if (field.field_name == f_key) %}
		                                                            value="{{ f_val }}"
		                                                        {% elseif (f_key == 'meta_address') %}
		                                                            {% if (f_val.meta_key is defined) %}
		                                                                {% if (field.field_name == f_val.meta_key) %}
		                                                                    value="{{ f_val.meta_value }}"
		                                                                {% endif %}
		                                                            {% endif %}
		                                                        {% endif %}
		                                                    {% endfor %}
		                                                {% elseif registered_address_before_module is defined %}
		                                                    {% for f_key, f_val in registered_address_before_module %}
		                                                        {% if (field.field_name == f_key) %}
		                                                            value="{{ f_val }}"
		                                                        {% endif %}
		                                                    {% endfor %}
		                                                {% endif %}
		                                                placeholder="{{ field.field_placeholder }}"
		                                                id="{{ field.field_id }}"
		                                                class="form-control"
		                                                {{ ( field.field_visibility != 0 and 1 in field.field_visibility ) ? 'readonly="readonly"' : '' }}
				                            			{{ (field.field_condition == 'required') ? 'required' : '' }} /> 
		                                        </div>
		                                    </div>
		                                {% endif %}
	                                {% endif %} {% endif %}

		                        {% elseif field.field_input_type == 'date' and (8 in field.field_to_show) %}

			                    	{% if (field.field_visibility != 0 and 2 in field.field_visibility) %}
			                    		<input type="hidden" name="{{ (field.field_existance == 'default') ? field.field_name : 'billing_address[' ~ field.field_name ~ ']' }}" id="{{ field.field_id }}" value="" />
			                        {% else %}
		                                <div class="form-group col-sm-12 {{ field.field_condition }}" style="width:{{ field.field_width }}%">
		                                    <label class="col-sm-2 control-label" for="{{ field.field_id }}">{{ field.field_label }}</label>
		                                    <div class="col-sm-10">
		                                        <div class="input-group date" >
		                                            <input type="text"
		                                                name="{{ (field.field_existance == 'default') ? field.field_name : 'billing_address[' ~ field.field_name ~ ']' }}"
		                                                {% if field.my_custom_address is defined %}
		                                                    {% for f_key, f_val in field.my_custom_address %}
		                                                        {% if (field.field_name == f_key) %}
		                                                            value="{{ f_val }}"
		                                                        {% elseif (f_key == 'meta_address') %}
		                                                            {% if f_val.meta_key is defined %}
		                                                                {% if (field.field_name == f_val.meta_key) %}
		                                                                    value="{{ f_val.meta_value }}"
		                                                                {% endif %}
		                                                            {% endif %}
		                                                        {% endif %}
		                                                    {% endfor %}
		                                                {% endif %}
		                                                placeholder="YYYY-MM-DD"
		                                                id="{{ field.field_id }}"
		                                                class="form-control"
		                                                data-date-format="YYYY-MM-DD"
		                                                {{ ( field.field_visibility != 0 and 1 in field.field_visibility ) ? 'readonly="readonly"' : '' }}
				                            			{{ (field.field_condition == 'required') ? 'required' : '' }}
		                                            /><span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span>
		                                        </div>
		                                    </div>
		                                </div>
	                                {% endif %}

		                        {% elseif field.field_input_type == 'time' and (8 in field.field_to_show) %}

			                    	{% if (field.field_visibility != 0 and 2 in field.field_visibility) %}
			                    		<input type="hidden" name="{{ (field.field_existance == 'default') ? field.field_name : 'billing_address[' ~ field.field_name ~ ']' }}" id="{{ field.field_id }}" value="" />
			                        {% else %}
		                                <div class="form-group col-sm-12 {{ field.field_condition }}" style="width:{{ field.field_width }}%">
		                                    <label class="col-sm-2 control-label" for="{{ field.field_id }}">{{ field.field_label }}</label>
		                                    <div class="col-sm-10">
		                                        <div class="input-group time" >
		                                            <input type="text"
		                                                name="{{ (field.field_existance == 'default') ? field.field_name : 'billing_address[' ~ field.field_name ~ ']' }}"
		                                                {% if field.my_custom_address is defined %}
		                                                    {% for f_key, f_val in field.my_custom_address %}
		                                                        {% if (field.field_name == f_key) %}
		                                                            value="{{ f_val }}"
		                                                        {% elseif (f_key == 'meta_address') %}
		                                                            {% if f_val.meta_key is defined %}
		                                                                {% if (field.field_name == f_val.meta_key) %}
		                                                                    value="{{ f_val.meta_value }}"
		                                                                {% endif %}
		                                                            {% endif %}
		                                                        {% endif %}
		                                                    {% endfor %}
		                                                {% endif %}
		                                                placeholder="HH:mm"
		                                                id="{{ field.field_id }}"
		                                                class="form-control"
		                                                data-date-format="HH:mm"
		                                                {{ ( field.field_visibility != 0 and 1 in field.field_visibility ) ? 'readonly="readonly"' : '' }}
				                            			{{ (field.field_condition == 'required') ? 'required' : '' }}
		                                            /><span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span>
		                                        </div>
		                                    </div>
		                                </div>
	                                {% endif %}

		                        {% elseif field.field_input_type == 'datetime' and (8 in field.field_to_show) %}

			                    	{% if (field.field_visibility != 0 and 2 in field.field_visibility) %}
			                    		<input type="hidden" name="{{ (field.field_existance == 'default') ? field.field_name : 'billing_address[' ~ field.field_name ~ ']' }}" id="{{ field.field_id }}" value="" />
			                        {% else %}
		                                <div class="form-group col-sm-12 {{ field.field_condition }}" style="width:{{ field.field_width }}%">
		                                    <label class="col-sm-2 control-label" for="{{ field.field_id }}">{{ field.field_label }}</label>
		                                    <div class="col-sm-10">
		                                        <div class="input-group datetime" >
		                                            <input type="text"
		                                                name="{{ (field.field_existance == 'default') ? field.field_name : 'billing_address[' ~ field.field_name ~ ']' }}"
		                                                {% if field.my_custom_address is defined %}
		                                                    {% for f_key, f_val in field.my_custom_address %}
		                                                        {% if (field.field_name == f_key) %}
		                                                            value="{{ f_val }}"
		                                                        {% elseif (f_key == 'meta_address') %}
		                                                            {% if f_val.meta_key is defined %}
		                                                                {% if (field.field_name == f_val.meta_key) %}
		                                                                    value="{{ f_val.meta_value }}"
		                                                                {% endif %}
		                                                            {% endif %}
		                                                        {% endif %}
		                                                    {% endfor %}
		                                                {% endif %}
		                                                placeholder="YYYY-MM-DD HH:mm"
		                                                id="{{ field.field_id }}"
		                                                class="form-control"
		                                                data-date-format="YYYY-MM-DD HH:mm"
		                                                {{ ( field.field_visibility != 0 and 1 in field.field_visibility ) ? 'readonly="readonly"' : '' }}
				                            			{{ (field.field_condition == 'required') ? 'required' : '' }}
		                                            /><span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span>
		                                        </div>
		                                    </div>
		                                </div>
	                                {% endif %}

		                        {% elseif field.field_input_type == 'textarea' and (8 in field.field_to_show) %}
		                                <div class="form-group col-sm-12 {{ field.field_condition }}" style="width:{{ field.field_width }}%">
		                                    <label class="col-sm-2 control-label" for="{{ field.field_id }}">{{ field.field_label }}</label>
		                                    <div class="col-sm-10">
		                                        <textarea rows="3" name="{{ (field.field_existance == 'default') ? field.field_name : 'billing_address[' ~ field.field_name ~ ']' }}" id="{{ field.field_id }}" placeholder="{{ field.field_placeholder }}" class="form-control"
		                                            {{ ( field.field_visibility != 0 and 1 in field.field_visibility ) ? 'readonly="readonly"' : '' }}
				                            		{{ (field.field_condition == 'required') ? 'required' : '' }}
		                                        >{% if field.my_custom_address is defined %}{% for f_key, f_val in field.my_custom_address %}{% if (field.field_name == f_key) %}{{ f_val }}{% elseif (f_key == 'meta_address') %}{% if f_val.meta_key is defined %}{% if (field.field_name == f_val.meta_key) %}{{ f_val.meta_value }}{% endif %}{% endif %}{% endif %}{% endfor %}{% endif %}</textarea>
		                                    </div>
		                                </div>

		                        {% elseif field.field_input_type == 'radio' and (8 in field.field_to_show) %}
		                                <div class="form-group col-sm-12 {{ field.field_condition }}" style="width:{{ field.field_width }}%">
		                                    <label class="col-sm-2 control-label" for="{{ field.field_id }}">{{ field.field_label }}</label>
		                                    <div class="col-sm-10">
						                        {% if field.field_options is not empty %}
							                        {% for option in field.field_options %}
							                        	<input type="{{ (field.field_visibility != 0 and 2 in field.field_visibility) ? 'hidden' : 'radio' }}"
		                                                    name="{{ (field.field_existance == 'default') ? field.field_name : 'billing_address[' ~ field.field_name ~ ']' }}"
		                                                    value="{{ option.op_value }}"
		                                                    {% if field.my_custom_address is defined %}
		                                                        {% for f_key, f_val in field.my_custom_address %}
		                                                            {% if (f_key == 'meta_address') %}
		                                                                {% if (field.field_name == f_val.meta_key and f_val.meta_value == option.op_value) %}
		                                                                    {{ 'checked="checked"' }}
		                                                                {% endif %}
		                                                            {% endif %}
		                                                        {% endfor %}
		                                                    {% endif %}
		                                                    {{ ( field.field_visibility != 0 and 1 in field.field_visibility ) ? 'readonly="readonly"' : '' }}
		                                                />
			                                            {{ option.op_name }}
		                                            {% endfor %}
		                                        {% endif %}
		                                    </div>
		                                </div>

		                        {% elseif field.field_input_type == 'checkbox' and (8 in field.field_to_show) %}
		                                <div class="form-group col-sm-12 {{ field.field_condition }}" style="width:{{ field.field_width }}
		                                    <label class="col-sm-2 control-label" for="{{ field.field_id }}">{{ field.field_label }}</label>
		                                    <div class="col-sm-10">

		                                        <!-- send hidden value, when checkbox has not been checked and is required, this is because when checkbox is required and it is not checked, then it doesn't send even name of the checkbox field to controller to check validation -->
		                                        {% if (field.field_condition == 'required') %}
		                                            <input type="hidden" name="billing_address[{{ field.field_name }}]" value="{{ field.field_condition }}">
		                                        {% endif %}

						                        {% if field.field_options is not empty %}
							                        {% for option in field.field_options %}
				                                            <label class="checkbox-inline">
				                                                <input type="{{ (field.field_visibility != 0 and 2 in field.field_visibility) ? 'hidden' : 'checkbox' }}" name="{{ (field.field_existance == 'default') ? field.field_name : 'billing_address[' ~ field.field_name ~ ']' }}[]" value="{{ option.op_value }}"
				                                                    {% if field.my_custom_address is defined %}
				                                                        {% for f_key, f_val in field.my_custom_address %}
				                                                            {% if (f_key == 'meta_address') %}
				                                                                {% if (f_val.meta_value is defined and f_val.meta_value is not empty) %}
				                                                                    {% for k, v in f_val.meta_value %}
				                                                                        {% if (v == option.op_value) %}
				                                                                            {{ 'checked="checked"' }}
				                                                                        {% endif %}
				                                                                    {% endfor %}
				                                                                {% endif %}
				                                                            {% endif %}
				                                                        {% endfor %}
				                                                    {% endif %}
				                                                    {{ ( field.field_visibility != 0 and 1 in field.field_visibility ) ? 'readonly="readonly"' : '' }}
				                                                />
				                                                {{ option.op_name }}
				                                            </label>
		                                            {% endfor %}
		                                        {% endif %}
		                                    </div>
		                                </div>

		                        {% elseif field.field_input_type == 'select' and (8 in field.field_to_show) %}
		                                <div class="form-group col-sm-12 {{ field.field_condition }}" style="width:{{ field.field_width }}%">
		                                    <label class="col-sm-2 control-label" for="{{ field.field_id }}">{{ field.field_label }}</label>
		                                    <div class="col-sm-10">
		                                        <select
		                                            name="{{ (field.field_existance == 'default') ? field.field_name : 'billing_address[' ~ field.field_name ~ ']' }}"
		                                            id="{{ field.field_id }}"
		                                            class="form-control"
		                                            {{ ( field.field_visibility != 0 and 1 in field.field_visibility ) ? 'readonly="readonly"' : '' }}
				                            		{{ (field.field_condition == 'required') ? 'required' : '' }} >
		                                            <!-- here is the default fields of country, zone etc -->
		                                            {% if (field.field_name == 'country_id') %}
			                                                <option value="">{{ text_select }}</option>
			                                                {% for country in countries %}
			                                                    {% if (country['country_id'] == country_id) %}
			                                                        <option value="{{ country['country_id'] }}" selected="selected">{{ country['name'] }}</option>
			                                                    {% else %}
			                                                        <option value="{{ country['country_id'] }}">{{ country['name'] }}</option>
			                                                    {% endif %}
			                                                {% endfor %}
		                                            <!-- here is my custom created fields -->
		                                            {% else %}
									                        {% if field.field_options is not empty %}
										                        {% for option in field.field_options %}
				                                                    <option
				                                                        value="{{ option.op_value }}"
				                                                        {% if field.my_custom_address is defined %}
				                                                            {% for f_key, f_val in field.my_custom_address %}
				                                                                {% if (f_key == 'meta_address') %}
				                                                                        {% if (field.field_name == f_val.meta_key and f_val.meta_value == option.op_value) %}
				                                                                            {{ 'selected="selected"' }}
				                                                                        {% endif %}
				                                                                {% endif %}
				                                                            {% endfor %}
				                                                        {% endif %}
				                                                    >{{ option.op_name }}</option>
			                                                    {% endfor %}
			                                                {% endif %}
			                                        {% endif %}
		                                        </select>
		                                    </div>
		                                </div>

		                        {% elseif field.field_input_type == 'multi-select' and (8 in field.field_to_show) %}
		                                <div class="form-group col-sm-12 {{ field.field_condition }}" style="width:{{ field.field_width }}%">
		                                    <label class="col-sm-2 control-label" for="{{ field.field_id }}">{{ field.field_label }}</label>
		                                    <div class="col-sm-10">
		                                        <select
		                                            multiple="multiple"
		                                            name="{{ (field.field_existance == 'default') ? field.field_name : 'billing_address[' ~ field.field_name ~ ']' }}[]"
		                                            id="{{ field.field_id }}"
		                                            class="form-control"
		                                            {{ ( field.field_visibility != 0 and 1 in field.field_visibility ) ? 'readonly="readonly"' : '' }}
				                            		{{ (field.field_condition == 'required') ? 'required' : '' }} >

							                        {% if field.field_options is not empty %}
								                        {% for option in field.field_options %}
				                                                <option
				                                                    value="{{ option.op_value }}"
				                                                    {% if field.my_custom_address is defined %}
				                                                        {% for f_key, f_val in field.my_custom_address %}
				                                                            {% if (f_key == 'meta_address') %}
				                                                                {% if (f_val.meta_value is defined and f_val.meta_value is not empty) %}
				                                                                    {% if (field.field_name == f_val.meta_key) %}
				                                                                        {% for k, v in f_val.meta_value %}
				                                                                            {% if (v == option.op_value) %}
				                                                                                {{ 'selected="selected"' }}
				                                                                            {% endif %}
				                                                                        {% endfor %}
				                                                                    {% endif %}
				                                                                {% endif %}
				                                                            {% endif %}
				                                                        {% endfor %}
				                                                    {% endif %}
			                                                    >
			                                                    	{{ option.op_name }}
			                                                    </option>
	                                                    {% endfor %}
	                                                {% endif %}
		                                        </select>
		                                    </div>
		                                </div>

		                        {% elseif field.field_input_type == 'file' and (8 in field.field_to_show) %}

		                            <div class="form-group col-sm-12 {{ field.field_condition }}" style="width:{{ field.field_width }}%">
		                                <label class="col-sm-2 control-label" for="{{ field.field_id }}">{{ field.field_label }}</label>
		                                <div class="col-sm-10">
		                                    <input type="file"
		                                        name="{{ (field.field_existance == 'default') ? field.field_name : 'billing_address[' ~ field.field_name ~ ']' }}"
		                                        value=""
		                                        id="{{ field.field_id }}"
		                                        class="form-control"
		                                        accept="application/msword, application/vnd.ms-excel, application/vnd.ms-powerpoint, text/plain, application/pdf"
				                            	{{ (field.field_condition == 'required') ? 'required' : '' }} />
		                                </div>
		                            </div>

		                        {% elseif field.field_input_type == 'image' and (8 in field.field_to_show) %}

		                            <div class="form-group col-sm-12 {{ field.field_condition }}" style="width:{{ field.field_width }}%">
		                                <label class="col-sm-2 control-label" for="{{ field.field_id }}">{{ field.field_label }}</label>
		                                <div class="col-sm-10">
		                                    <input type="file"
		                                        name="{{ (field.field_existance == 'default') ? field.field_name : 'billing_address[' ~ field.field_name ~ ']' }}"
		                                        value=""
		                                        placeholder="{{ field.field_placeholder }}"
		                                        id="{{ field.field_id }}"
		                                        class="form-control"
		                                        accept="image/*"
				                            	{{ (field.field_condition == 'required') ? 'required' : '' }} />
		                                </div>
		                            </div>
		                        {% endif %}
		                {% endfor %}

		            <!-- when you submit, and there is any error mean any empty field you are posting and this field is actually required field, then when the form is return, this below form will be shown -->
		            {% elseif (error_in_input_fields is defined and error_in_input_fields is not empty) %}
		                {% for field in error_in_input_fields %}

		                    {% if field.field_input_type == 'text' and (8 in field.field_to_show) %}
				                {% if field.field_name != 'email' %} {% if field.field_name != 'telephone' %}
			                    	{% if (field.field_visibility != 0 and 2 in field.field_visibility) %}
			                    		<input type="hidden" name="{{ (field.field_existance == 'default') ? field.field_name : 'billing_address[' ~ field.field_name ~ ']' }}" id="{{ field.field_id }}" value="" />
			                        {% else %}
				                        <div class="form-group col-sm-12 {{ field.field_condition }}" style="width:{{ field.field_width }}%">
				                            <label class="col-sm-2 control-label" for="{{ field.field_id }}">{{ field.field_label }}</label>
				                            <div class="col-sm-10">
				                                <input type="text" name="{{ field.field_name }}"
				                                    {% for key, value in input_keys %}
				                                        {% if (key == field.field_name) %}
				                                            value="{{ value }}"
				                                        {% endif %}
				                                    {% endfor %}
				                                    placeholder="{{ field.field_placeholder }}"
				                                    id="{{ field.field_id }}"
				                                    class="form-control"
				                                    {{ (field.field_visibility == 1) ? 'readonly="readonly"': '' }}
						                            {{ (field.field_condition == 'required') ? 'required' : '' }} />

					                                <!-- error text -->
					                                {% if error is defined %}
					                                    {% for key, value in error %}
					                                        {% if value is not empty %}
					                                            {% set k = key|split('error_') %}
					                                            {% if k[1] == field.field_name %}
					                                                <div class="text-danger">{{ value }}</div>
					                                            {% endif %}
					                                        {% endif %}
					                                    {% endfor %}
					                                {% endif %}
				                            </div>
				                        </div>
			                        {% endif %}
		                        {% endif %} {% endif %}

		                    {% elseif field.field_input_type == 'date' and (8 in field.field_to_show) %}

		                    	{% if (field.field_visibility != 0 and 2 in field.field_visibility) %}
		                    		<input type="hidden" name="{{ (field.field_existance == 'default') ? field.field_name : 'billing_address[' ~ field.field_name ~ ']' }}" id="{{ field.field_id }}" value="" />
		                        {% else %}
			                        <div class="form-group col-sm-12 {{ field.field_condition }}" style="width:{{ field.field_width }}%">
			                            <label class="col-sm-2 control-label" for="{{ field.field_id }}">{{ field.field_label }}</label>
			                            <div class="col-sm-10">
			                                <div class="input-group date" >
			                                    <input type="text" name="{{ (field.field_existance == 'default') ? field.field_name : 'billing_address[' ~ field.field_name ~ ']' }}"
			                                        {% for key, value in input_keys %}
			                                            {% if (key == field.field_name) %}
			                                                value="{{ value }}"
			                                            {% endif %}
			                                        {% endfor %}
			                                        placeholder="YYYY-MM-DD"
			                                        id="{{ field.field_id }}"
			                                        class="form-control"
			                                        data-date-format="YYYY-MM-DD"
					                            	{{ (field.field_condition == 'required') ? 'required' : '' }}
			                                    /><span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span>
			                                </div>

				                                <!-- error text -->
				                                {% if error is defined %}
				                                    {% for key, value in error %}
				                                        {% if value is not empty %}
				                                            {% set k = key|split('error_') %}
				                                            {% if k[1] == field.field_name %}
				                                                <div class="text-danger">{{ value }}</div>
				                                            {% endif %}
				                                        {% endif %}
				                                    {% endfor %}
				                                {% endif %}
			                            </div>
			                        </div>
		                        {% endif %}

		                    {% elseif field.field_input_type == 'time' and (8 in field.field_to_show) %}

		                    	{% if (field.field_visibility != 0 and 2 in field.field_visibility) %}
		                    		<input type="hidden" name="{{ (field.field_existance == 'default') ? field.field_name : 'billing_address[' ~ field.field_name ~ ']' }}" id="{{ field.field_id }}" value="" />
		                        {% else %}
			                        <div class="form-group col-sm-12 {{ field.field_condition }}" style="width:{{ field.field_width }}%">
			                            <label class="col-sm-2 control-label" for="{{ field.field_id }}">{{ field.field_label }}</label>
			                            <div class="col-sm-10">
			                                <div class="input-group time" >
			                                    <input type="text" name="{{ (field.field_existance == 'default') ? field.field_name : 'billing_address[' ~ field.field_name ~ ']' }}"
			                                        {% for key, value in input_keys %}
			                                            {% if (key == field.field_name) %}
			                                                value="{{ value }}"
			                                            {% endif %}
			                                        {% endfor %}
			                                        placeholder="HH:mm"
			                                        id="{{ field.field_id }}"
			                                        class="form-control"
			                                        data-date-format="HH:mm"
					                            	{{ (field.field_condition == 'required') ? 'required' : '' }}
			                                    /><span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span>
			                                </div>

				                                <!-- error text -->
				                                {% if error is defined %}
				                                    {% for key, value in error %}
				                                        {% if value is not empty %}
				                                            {% set k = key|split('error_') %}
				                                            {% if k[1] == field.field_name %}
				                                                <div class="text-danger">{{ value }}</div>
				                                            {% endif %}
				                                        {% endif %}
				                                    {% endfor %}
				                                {% endif %}
			                            </div>
			                        </div>
		                        {% endif %}

		                    {% elseif field.field_input_type == 'datetime' and (8 in field.field_to_show) %}

		                    	{% if (field.field_visibility != 0 and 2 in field.field_visibility) %}
		                    		<input type="hidden" name="{{ (field.field_existance == 'default') ? field.field_name : 'billing_address[' ~ field.field_name ~ ']' }}" id="{{ field.field_id }}" value="" />
		                        {% else %}
			                        <div class="form-group col-sm-12 {{ field.field_condition }}" style="width:{{ field.field_width }}%">
			                            <label class="col-sm-2 control-label" for="{{ field.field_id }}">{{ field.field_label }}</label>
			                            <div class="col-sm-10">
			                                <div class="input-group datetime" >
			                                    <input type="text" name="{{ (field.field_existance == 'default') ? field.field_name : 'billing_address[' ~ field.field_name ~ ']' }}"
			                                        {% for key, value in input_keys %}
			                                            {% if (key == field.field_name) %}
			                                                value="{{ value }}"
			                                            {% endif %}
			                                        {% endfor %}
			                                        placeholder="YYYY-MM-DD HH:mm"
			                                        id="{{ field.field_id }}"
			                                        class="form-control"
			                                        data-date-format="YYYY-MM-DD HH:mm"
					                            	{{ (field.field_condition == 'required') ? 'required' : '' }}
			                                    /><span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span>
			                                </div>

				                                <!-- error text -->
				                                {% if error is defined %}
				                                    {% for key, value in error %}
				                                        {% if value is not empty %}
				                                            {% set k = key|split('error_') %}
				                                            {% if k[1] == field.field_name %}
				                                                <div class="text-danger">{{ value }}</div>
				                                            {% endif %}
				                                        {% endif %}
				                                    {% endfor %}
				                                {% endif %}
			                            </div>
			                        </div>
		                        {% endif %}

		                    {% elseif field.field_input_type == 'textarea' and (8 in field.field_to_show) %}

		                        <div class="form-group col-sm-12 {{ field.field_condition }}" style="width:{{ field.field_width }}%">
		                            <label class="col-sm-2 control-label" for="{{ field.field_id }}">{{ field.field_label }}</label>
		                            <div class="col-sm-10">
		                                <textarea cols="3" name="{{ (field.field_existance == 'default') ? field.field_name : 'billing_address[' ~ field.field_name ~ ']' }}" id="{{ field.field_id }}" class="form-control" placeholder="{{ field.field_placeholder }}"
		                                    {{ (field.field_visibility == 1) ? 'readonly="readonly"': '' }}
				                            {{ (field.field_condition == 'required') ? 'required' : '' }}
		                                    >{% if input_keys is defined %}
		                                        {% for key, value in input_keys %}
		                                            {% if (key == field.field_name) %}
		                                                {{ value }}
		                                            {% endif %}
		                                        {% endfor %}
		                                    {% endif %}</textarea>

			                                <!-- error text -->
			                                {% if error is defined %}
			                                    {% for key, value in error %}
			                                        {% if value is not empty %}
			                                            {% set k = key|split('error_') %}
			                                            {% if k[1] == field.field_name %}
			                                                <div class="text-danger">{{ value }}</div>
			                                            {% endif %}
			                                        {% endif %}
			                                    {% endfor %}
			                                {% endif %}
		                            </div>
		                        </div>

		                    {% elseif field.field_input_type == 'radio' and (8 in field.field_to_show) %}

		                        <div class="form-group col-sm-12 {{ field.field_condition }}" style="width:{{ field.field_width }}%">
		                            <label class="col-sm-2 control-label" for="{{ field.field_id }}">{{ field.field_label }}</label>
		                            <div class="col-sm-10">
		                            
		                                <!-- send required condition in hidden field -->
		                                {% if (field.field_condition == 'required') %}
		                                    <input type="hidden" name="billing_address[{{ field.field_name }}]" value="{{ field.field_condition }}">
		                                {% endif %}
				                        {% if field.field_options is not empty %}
					                        {% for option in field.field_options %}
					                        	<label class="radio-inline">
			                                        <input type="radio" name="{{ (field.field_existance == 'default') ? field.field_name : 'billing_address[' ~ field.field_name ~ ']' }}" value="{{ option.op_value }}"
			                                            {% if input_keys is defined %}
			                                                {% for key, value in input_keys %}
			                                                    {% if (key == field.field_name and value == option.op_value) %}
			                                                        {{ 'checked="checked"' }}
			                                                    {% endif %}
			                                                {% endfor %}
			                                            {% endif %}
			                                        />
			                                        {{ option.op_name }}
			                                    </label>
	                                        {% endfor %}
	                                    {% endif %}

			                                <!-- error text -->
			                                {% if error is defined %}
			                                    {% for key, value in error %}
			                                        {% if value is not empty %}
			                                            {% set k = key|split('error_') %}
			                                            {% if k[1] == field.field_name %}
			                                                <div class="text-danger">{{ value }}</div>
			                                            {% endif %}
			                                        {% endif %}
			                                    {% endfor %}
			                                {% endif %}
		                            </div>
		                        </div>

		                    {% elseif field.field_input_type == 'checkbox' and (8 in field.field_to_show) %}

		                        <div class="form-group col-sm-12 {{ field.field_condition }}" style="width:{{ field.field_width }}%">
		                            <label class="col-sm-2 control-label" for="{{ field.field_id }}">{{ field.field_label }}</label>
		                            <div class="col-sm-10">
		                                
		                                <!-- send hidden value, when checkbox has not been checked and is required, this is because when checkbox is required and it is not checked, then it doesn't send even name of the checkbox field to controller to check validation -->
		                                {% if (field.field_condition == 'required') %}
		                                    <input type="hidden" name="billing_address[{{ field.field_name }}]" value="{{ field.field_condition }}">
		                                {% endif %}
				                        {% if field.field_options is not empty %}
					                        {% for option in field.field_options %}
					                        		<label class="checkbox-inline">
						                                <input type="checkbox" name="{{ (field.field_existance == 'default') ? field.field_name : 'billing_address[' ~ field.field_name ~ ']' }}[]" value="{{ option.op_value }}"
		                                            		{{ (field.field_visibility == 1) ? 'readonly="readonly"': '' }}
						                                    {% if input_keys is defined and input_keys is not empty %}
				                                                {% for key, value in input_keys %}
				                                                    {% if key == field.field_name %}
				                                                        {% if value is iterable %}
				                                                            {% for k, v in value %}
				                                                                {{ (option.op_value == v) ? 'checked="checked"': '' }}
				                                                            {% endfor %}
				                                                        {% endif %}
				                                                    {% endif %}
				                                                {% endfor %}
				                                            {% endif %}
						                                />
						                                {{ option.op_name }}
						                            </label>
					                        {% endfor %}
				                        {% endif %}

		                                {% if error is defined %}
		                                    {% for key, value in error %}
		                                        {% if value is not empty %}
		                                            {% set k = key|split('error_') %}
		                                            {% if k[1] == field.field_name %}
		                                                <div class="text-danger">{{ value }}</div>
		                                            {% endif %}
		                                        {% endif %}
		                                    {% endfor %}
		                                {% endif %}
		                            </div>
		                        </div>

		                    {% elseif field.field_input_type == 'select' and (8 in field.field_to_show) %}

		                        <div class="form-group col-sm-12 {{ field.field_condition }}" style="width:{{ field.field_width }}%">
		                            <label class="col-sm-2 control-label" for="{{ field.field_id }}">{{ field.field_label }}</label>
		                            <div class="col-sm-10">
		                                <select name="{{ (field.field_existance == 'default') ? field.field_name : 'billing_address[' ~ field.field_name ~ ']' }}" id="{{ field.field_id }}" class="form-control"
				                            {{ (field.field_condition == 'required') ? 'required' : '' }}
				                        >
		                                    {% if (field.field_name == 'country_id') %}
			                                        <option value="">{{ text_select }}</option>
			                                        {% for country in countries %}
			                                            {% if (country['country_id'] == country_id) %}
			                                                <option value="{{ country['country_id'] }}" selected="selected">{{ country['name'] }}</option>
			                                            {% else %}
			                                                <option value="{{ country['country_id'] }}">{{ country['name'] }}</option>
			                                            {% endif %}
			                                        {% endfor %}
		                                    {% else %}
							                        {% if field.field_options is not empty %}
								                        {% for option in field.field_options %}
								                            <option value="{{ option.op_value }}"
								                            	{% if input_keys is defined %}
				                                                    {% for key, val in input_keys %}
				                                                        {% if (key == field.field_name and val == option.op_value) %}
				                                                            {{ 'selected="selected"' }}
				                                                        {% endif %}
				                                                    {% endfor %}
				                                                {% endif %}
								                            >{{ option.op_name }}</option>
								                        {% endfor %}
							                        {% endif %}
			                                {% endif %}
		                                </select>

		                                {% if error is defined %}
		                                    {% for key, value in error %}
		                                        {% if value is not empty %}
		                                            {% set k = key|split('error_') %}
		                                            {% if k[1] == field.field_name %}
		                                                <div class="text-danger">{{ value }}</div>
		                                            {% endif %}
		                                        {% endif %}
		                                    {% endfor %}
		                                {% endif %}
		                            </div>
		                        </div>

		                    {% elseif field.field_input_type == 'multi-select' and (8 in field.field_to_show) %}
		                           
		                        <div class="form-group col-sm-12 {{ field.field_condition }}" style="width:{{ field.field_width }}%">
		                            <label class="col-sm-2 control-label" for="{{ field.field_id }}">{{ field.field_label }}</label>
		                            <div class="col-sm-10">
		                                <select multiple="multiple" name="{{ (field.field_existance == 'default') ? field.field_name : 'billing_address[' ~ field.field_name ~ ']' }}[]" id="{{ field.field_id }}" class="form-control"
				                            {{ (field.field_condition == 'required') ? 'required' : '' }}
		                                >
					                        {% if field.field_options is not empty %}
						                        {% for option in field.field_options %}
						                            <option value="{{ option.op_value }}"
						                            	{% if input_keys is defined %}
				                                                {% for key, value in input_keys %}
				                                                    {% if (key == field.field_name) %}
				                                                        {% for v in value %}
				                                                            {{ (option.op_value == v) ? 'selected="selected"': '' }}
				                                                        {% endfor %}
				                                                    {% endif %}
				                                                {% endfor %}
				                                        {% endif %}
						                            >{{ option.op_name }}</option>
						                        {% endfor %}
					                        {% endif %}
		                                </select>

		                                {% if error is defined %}
		                                    {% for key, value in error %}
		                                        {% if value is not empty %}
		                                            {% set k = key|split('error_') %}
		                                            {% if k[1] == field.field_name %}
		                                                <div class="text-danger">{{ value }}</div>
		                                            {% endif %}
		                                        {% endif %}
		                                    {% endfor %}
		                                {% endif %}
		                            </div>
		                        </div>

		                    {% elseif field.field_input_type == 'file' and (8 in field.field_to_show) %}

		                        <div class="form-group col-sm-12 {{ field.field_condition }}" style="width:{{ field.field_width }}%">
		                            <label class="col-sm-2 control-label" for="{{ field.field_id }}">{{ field.field_label }}</label>
		                            <div class="col-sm-10">
		                                <input type="file"
		                                    name="{{ (field.field_existance == 'default') ? field.field_name : 'billing_address[' ~ field.field_name ~ ']' }}"
		                                    value=""
		                                    id="{{ field.field_id }}"
		                                    class="form-control"
		                                    accept="application/msword, application/vnd.ms-excel, application/vnd.ms-powerpoint, text/plain, application/pdf"
		                                    {{ (field.field_visibility == 1) ? 'readonly="readonly"' : '' }}
				                            {{ (field.field_condition == 'required') ? 'required' : '' }}
		                                />

		                                {% if error is defined %}
		                                    {% for key, value in error %}
		                                        {% if value is not empty %}
		                                            {% set k = key|split('error_') %}
		                                            {% if k[1] == field.field_name %}
		                                                <div class="text-danger">{{ value }}</div>
		                                            {% endif %}
		                                        {% endif %}
		                                    {% endfor %}
		                                {% endif %}
		                            </div>
		                        </div>

		                    {% elseif field.field_input_type == 'image' and (8 in field.field_to_show) %}

		                        <div class="form-group col-sm-12 {{ field.field_condition }}" style="width:{{ field.field_width }}%">
		                            <label class="col-sm-2 control-label" for="{{ field.field_id }}">{{ field.field_label }}</label>
		                            <div class="col-sm-10">
		                                <input type="file"
		                                    name="{{ (field.field_existance == 'default') ? field.field_name : 'billing_address[' ~ field.field_name ~ ']' }}"
		                                    value=""
		                                    id="{{ field.field_id }}"
		                                    class="form-control"
		                                    accept="image/*"
		                                    {{ (field.field_visibility == 1) ? 'readonly="readonly"': '' }}
				                            {{ (field.field_condition == 'required') ? 'required' : '' }}
		                                />

		                                {% if error is defined %}
		                                    {% for key, value in error %}
		                                        {% if value is not empty %}
		                                            {% set k = key|split('error_') %}
		                                            {% if k[1] == field.field_name %}
		                                                <div class="text-danger">{{ value }}</div>
		                                            {% endif %}
		                                        {% endif %}
		                                    {% endfor %}
		                                {% endif %}
		                            </div>
		                        </div>
		                    {% endif %}
		                {% endfor %}

		            {% else %}
	            <!-- Extendons - Checkout Manager /- END -->
		    	
        <fieldset>
          <div class="form-group required">
            <label class="col-sm-2 control-label" for="input-firstname">{{ entry_firstname }}</label>
            <div class="col-sm-10">
              <input type="text" name="firstname" value="{{ firstname }}" placeholder="{{ entry_firstname }}" id="input-firstname" class="form-control" />
              {% if error_firstname %}
              <div class="text-danger">{{ error_firstname }}</div>
              {% endif %} </div>
          </div>
          <div class="form-group required">
            <label class="col-sm-2 control-label" for="input-lastname">{{ entry_lastname }}</label>
            <div class="col-sm-10">
              <input type="text" name="lastname" value="{{ lastname }}" placeholder="{{ entry_lastname }}" id="input-lastname" class="form-control" />
              {% if error_lastname %}
              <div class="text-danger">{{ error_lastname }}</div>
              {% endif %} </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label" for="input-company">{{ entry_company }}</label>
            <div class="col-sm-10">
              <input type="text" name="company" value="{{ company }}" placeholder="{{ entry_company }}" id="input-company" class="form-control" />
            </div>
          </div>
          <div class="form-group required">
            <label class="col-sm-2 control-label" for="input-address-1">{{ entry_address_1 }}</label>
            <div class="col-sm-10">
              <input type="text" name="address_1" value="{{ address_1 }}" placeholder="{{ entry_address_1 }}" id="input-address-1" class="form-control" />
              {% if error_address_1 %}
              <div class="text-danger">{{ error_address_1 }}</div>
              {% endif %} </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label" for="input-address-2">{{ entry_address_2 }}</label>
            <div class="col-sm-10">
              <input type="text" name="address_2" value="{{ address_2 }}" placeholder="{{ entry_address_2 }}" id="input-address-2" class="form-control" />
            </div>
          </div>
          <div class="form-group required">
            <label class="col-sm-2 control-label" for="input-city">{{ entry_city }}</label>
            <div class="col-sm-10">
              <input type="text" name="city" value="{{ city }}" placeholder="{{ entry_city }}" id="input-city" class="form-control" />
              {% if error_city %}
              <div class="text-danger">{{ error_city }}</div>
              {% endif %} </div>
          </div>
          <div class="form-group required">
            <label class="col-sm-2 control-label" for="input-postcode">{{ entry_postcode }}</label>
            <div class="col-sm-10">
              <input type="text" name="postcode" value="{{ postcode }}" placeholder="{{ entry_postcode }}" id="input-postcode" class="form-control" />
              {% if error_postcode %}
              <div class="text-danger">{{ error_postcode }}</div>
              {% endif %} </div>
          </div>
          <div class="form-group required">
            <label class="col-sm-2 control-label" for="input-country">{{ entry_country }}</label>
            <div class="col-sm-10">
              <select name="country_id" id="input-country" class="form-control">
                <option value="">{{ text_select }}</option>
                
                {% for country in countries %}
                  {% if country.country_id == country_id %}
                
                <option value="{{ country.country_id }}" selected="selected">{{ country.name }}</option>
                
                  {% else %}
                
                <option value="{{ country.country_id }}">{{ country.name }}</option>
                
                  {% endif %}
                {% endfor %}
              
              </select>
              {% if error_country %}
              <div class="text-danger">{{ error_country }}</div>
              {% endif %} </div>
          </div>
          <div class="form-group required">
            <label class="col-sm-2 control-label" for="input-zone">{{ entry_zone }}</label>
            <div class="col-sm-10">
              <select name="zone_id" id="input-zone" class="form-control">
              </select>
              {% if error_zone %}
              <div class="text-danger">{{ error_zone }}</div>
              {% endif %} </div>
          </div>

	            <!-- Extendons - Checkout Manager -->
				    {% endif %} <!-- end if(my_custom_input_fields) -->
	            <!-- Extendons - Checkout Manager /- END -->
		    	
          {% for custom_field in custom_fields %}
          {% if custom_field.type == 'select' %}
          <div class="form-group{% if custom_field.required %} required {% endif %} custom-field" data-sort="{{ custom_field.sort_order }}">
            <label class="col-sm-2 control-label" for="input-custom-field{{ custom_field.custom_field_id }}">{{ custom_field.name }}</label>
            <div class="col-sm-10">
              <select name="custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}]" id="input-custom-field{{ custom_field.custom_field_id }}" class="form-control">
                <option value="">{{ text_select }}</option>
                
                
                
                      {% for custom_field_value in custom_field.custom_field_value %}
                        {% if address_custom_field[custom_field.custom_field_id] and custom_field_value.custom_field_value_id == address_custom_field[custom_field.custom_field_id] %}
                
                <option value="{{ custom_field_value.custom_field_value_id }}" selected="selected">{{ custom_field_value.name }}</option>
                
                
                
                        {% else %}
                          
                
                
                <option value="{{ custom_field_value.custom_field_value_id }}">{{ custom_field_value.name }}</option>
                
                
                
                        {% endif %}
                      {% endfor %}
                    
              
              
              </select>
              {% if error_custom_field[custom_field.custom_field_id] %}
              <div class="text-danger">{{ error_custom_field[custom_field.custom_field_id] }}</div>
              {% endif %}</div>
          </div>
          {% endif %}
          {% if custom_field.type == 'radio' %}
          <div class="form-group{% if custom_field.required %} required {% endif %} custom-field" data-sort="{{ custom_field.sort_order }}">
            <label class="col-sm-2 control-label">{{ custom_field.name }}</label>
            <div class="col-sm-10">
              <div> {% for custom_field_value in custom_field.custom_field_value %}
                <div class="radio"> {% if address_custom_field[custom_field.custom_field_id] and custom_field_value.custom_field_value_id == address_custom_field[custom_field.custom_field_id] %}
                  <label>
                    <input type="radio" name="custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}]" value="{{ custom_field_value.custom_field_value_id }}" checked="checked" />
                    {{ custom_field_value.name }}</label>
                  {% else %}
                  <label>
                    <input type="radio" name="custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}]" value="{{ custom_field_value.custom_field_value_id }}" />
                    {{ custom_field_value.name }}</label>
                  {% endif %} </div>
                {% endfor %} </div>
              {% if error_custom_field[custom_field.custom_field_id] %}
              <div class="text-danger">{{ error_custom_field[custom_field.custom_field_id] }}</div>
              {% endif %} </div>
          </div>
          {% endif %}
          {% if custom_field.type == 'checkbox' %}
          <div class="form-group{% if custom_field.required %} required {% endif %} custom-field" data-sort="{{ custom_field.sort_order }}">
            <label class="col-sm-2 control-label">{{ custom_field.name }}</label>
            <div class="col-sm-10">
              <div> {% for custom_field_value in custom_field.custom_field_value %}
                <div class="checkbox"> {% if address_custom_field[custom_field.custom_field_id] and custom_field_value.custom_field_value_id in address_custom_field[custom_field.custom_field_id] %}
                  <label>
                    <input type="checkbox" name="custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}][]" value="{{ custom_field_value.custom_field_value_id }}" checked="checked" />
                    {{ custom_field_value.name }}</label>
                  {% else %}
                  <label>
                    <input type="checkbox" name="custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}][]" value="{{ custom_field_value.custom_field_value_id }}" />
                    {{ custom_field_value.name }}</label>
                  {% endif %} </div>
                {% endfor %} </div>
              {% if error_custom_field[custom_field.custom_field_id] %}
              <div class="text-danger">{{ error_custom_field[custom_field.custom_field_id] }}</div>
              {% endif %} </div>
          </div>
          {% endif %}
          {% if custom_field.type == 'text' %}
          <div class="form-group{% if custom_field.required %} required {% endif %} custom-field" data-sort="{{ custom_field.sort_order }}">
            <label class="col-sm-2 control-label" for="input-custom-field{{ custom_field.custom_field_id }}">{{ custom_field.name }}</label>
            <div class="col-sm-10">
              <input type="text" name="custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}]" value="{% if address_custom_field[custom_field.custom_field_id] %}{{ address_custom_field[custom_field.custom_field_id] }}{% else %}{{ custom_field.value }}{% endif %}" placeholder="{{ custom_field.name }}" id="input-custom-field{{ custom_field.custom_field_id }}" class="form-control" />
              {% if error_custom_field[custom_field.custom_field_id] %}
              <div class="text-danger">{{ error_custom_field[custom_field.custom_field_id] }}</div>
              {% endif %} </div>
          </div>
          {% endif %}
          {% if custom_field.type == 'textarea' %}
          <div class="form-group{% if custom_field.required %} required {% endif %} custom-field" data-sort="{{ custom_field.sort_order }}">
            <label class="col-sm-2 control-label" for="input-custom-field{{ custom_field.custom_field_id }}">{{ custom_field.name }}</label>
            <div class="col-sm-10">
              <textarea name="custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}]" rows="5" placeholder="{{ custom_field.name }}" id="input-custom-field{{ custom_field.custom_field_id }}" class="form-control">{% if address_custom_field[custom_field.custom_field_id] %}{{ address_custom_field[custom_field.custom_field_id] }}{% else %}{{ custom_field.value }}{% endif %}</textarea>
              {% if error_custom_field[custom_field.custom_field_id] %}
              <div class="text-danger">{{ error_custom_field[custom_field.custom_field_id] }}</div>
              {% endif %} </div>
          </div>
          {% endif %}
          {% if custom_field.type == 'file' %}
          <div class="form-group{% if custom_field.required %} required {% endif %} custom-field" data-sort="{{ custom_field.sort_order }}">
            <label class="col-sm-2 control-label">{{ custom_field.name }}</label>
            <div class="col-sm-10">
              <button type="button" id="button-custom-field{{ custom_field.custom_field_id }}" data-loading-text="{{ text_loading }}" class="btn btn-default"><i class="fa fa-upload"></i> {{ button_upload }}</button>
              <input type="hidden" name="custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}]" value="{% if address_custom_field[custom_field.custom_field_id] %}  {{ address_custom_field[custom_field.custom_field_id] }} {% endif %}" />
              {% if error_custom_field[custom_field.custom_field_id] %}
              <div class="text-danger">{{ error_custom_field[custom_field.custom_field_id] }}</div>
              {% endif %} </div>
          </div>
          {% endif %}
          {% if custom_field.type == 'date' %}
          <div class="form-group{% if custom_field.required %} required {% endif %} custom-field" data-sort="{{ custom_field.sort_order }}">
            <label class="col-sm-2 control-label" for="input-custom-field{{ custom_field.custom_field_id }}">{{ custom_field.name }}</label>
            <div class="col-sm-10">
              <div class="input-group date">
                <input type="text" name="custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}]" value="{% if address_custom_field[custom_field.custom_field_id] %}{{ address_custom_field[custom_field.custom_field_id] }}{% else %}{{ custom_field.value }}{% endif %}" placeholder="{{ custom_field.name }}" data-date-format="YYYY-MM-DD" id="input-custom-field{{ custom_field.custom_field_id }}" class="form-control" />
                <span class="input-group-btn">
                <button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button>
                </span></div>
              {% if error_custom_field[custom_field.custom_field_id] %}
              <div class="text-danger">{{ error_custom_field[custom_field.custom_field_id] }}</div>
              {% endif %} </div>
          </div>
          {% endif %}
          {% if custom_field.type == 'time' %}
          <div class="form-group{% if custom_field.required %} required {% endif %} custom-field" data-sort="{{ custom_field.sort_order }}">
            <label class="col-sm-2 control-label" for="input-custom-field{{ custom_field.custom_field_id }}">{{ custom_field.name }}</label>
            <div class="col-sm-10">
              <div class="input-group time">
                <input type="text" name="custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}]" value="{% if address_custom_field[custom_field.custom_field_id] %}{{ address_custom_field[custom_field.custom_field_id] }}{% else %}{{ custom_field.value }}{% endif %}" placeholder="{{ custom_field.name }}" data-date-format="HH:mm" id="input-custom-field{{ custom_field.custom_field_id }}" class="form-control" />
                <span class="input-group-btn">
                <button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button>
                </span></div>
              {% if error_custom_field[custom_field.custom_field_id] %}
              <div class="text-danger">{{ error_custom_field[custom_field.custom_field_id] }}</div>
              {% endif %} </div>
          </div>
          {% endif %}
          {% if custom_field.type == 'time' %}
          <div class="form-group{% if custom_field.required %} required {% endif %} custom-field" data-sort="{{ custom_field.sort_order }}">
            <label class="col-sm-2 control-label" for="input-custom-field{{ custom_field.custom_field_id }}">{{ custom_field.name }}</label>
            <div class="col-sm-10">
              <div class="input-group datetime">
                <input type="text" name="custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}]" value="{% if address_custom_field[custom_field.custom_field_id] %}{{ address_custom_field[custom_field.custom_field_id] }}{% else %}{{ custom_field.value }}{% endif %}" placeholder="{{ custom_field.name }}" data-date-format="YYYY-MM-DD HH:mm" id="input-custom-field{{ custom_field.custom_field_id }}" class="form-control" />
                <span class="input-group-btn">
                <button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button>
                </span></div>
              {% if error_custom_field[custom_field.custom_field_id] %}
              <div class="text-danger">{{ error_custom_field[custom_field.custom_field_id] }}</div>
              {% endif %} </div>
          </div>
          {% endif %}
          {% endfor %}
          <div class="form-group">
            <label class="col-sm-2 control-label">{{ entry_default }}</label>
            <div class="col-sm-10"> {% if default %}
              <label class="radio-inline">
                <input type="radio" name="default" value="1" checked="checked" />
                {{ text_yes }}</label>
              <label class="radio-inline">
                <input type="radio" name="default" value="0" />
                {{ text_no }}</label>
              {% else %}
              <label class="radio-inline">
                <input type="radio" name="default" value="1" />
                {{ text_yes }}</label>
              <label class="radio-inline">
                <input type="radio" name="default" value="0" checked="checked" />
                {{ text_no }}</label>
              {% endif %} </div>
          </div>
        </fieldset>
        <div class="buttons clearfix">
          <div class="pull-left"><a href="{{ back }}" class="btn btn-default">{{ button_back }}</a></div>
          <div class="pull-right">
            <input type="submit" value="{{ button_continue }}" class="btn btn-primary" />
          </div>
        </div>
      </form>
      {{ content_bottom }}</div>
    {{ column_right }}</div>
</div>
<script type="text/javascript"><!--
// Sort the custom fields
$('.form-group[data-sort]').detach().each(function() {
	if ($(this).attr('data-sort') >= 0 && $(this).attr('data-sort') <= $('.form-group').length-2) {
		$('.form-group').eq(parseInt($(this).attr('data-sort'))+2).before(this);
	}
	
	if ($(this).attr('data-sort') > $('.form-group').length-2) {
		$('.form-group:last').after(this);
	}
	
	if ($(this).attr('data-sort') == $('.form-group').length-2) {
		$('.form-group:last').after(this);
	}
	
	if ($(this).attr('data-sort') < -$('.form-group').length-2) {
		$('.form-group:first').before(this);
	}
});
//--></script> 
<script type="text/javascript"><!--
$('button[id^=\'button-custom-field\']').on('click', function() {
	var element = this;
	
	$('#form-upload').remove();
	
	$('body').prepend('<form enctype="multipart/form-data" id="form-upload" style="display: none;"><input type="file" name="file" /></form>');
	
	$('#form-upload input[name=\'file\']').trigger('click');
	
	if (typeof timer != 'undefined') {
		clearInterval(timer);
	}
	
	timer = setInterval(function() {
		if ($('#form-upload input[name=\'file\']').val() != '') {
			clearInterval(timer);
		
			$.ajax({
				url: 'index.php?route=tool/upload',
				type: 'post',
				dataType: 'json',
				data: new FormData($('#form-upload')[0]),
				cache: false,
				contentType: false,
				processData: false,
				beforeSend: function() {
					$(element).button('loading');
				},
				complete: function() {
					$(element).button('reset');
				},
				success: function(json) {
					$(element).parent().find('.text-danger').remove();
					
					if (json['error']) {
						$(element).parent().find('input').after('<div class="text-danger">' + json['error'] + '</div>');
					}
					
					if (json['success']) {
						alert(json['success']);
						
						$(element).parent().find('input').val(json['code']);
					}
				},
				error: function(xhr, ajaxOptions, thrownError) {
					alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
				}
			});
		}
	}, 500);
});
//--></script> 
<script type="text/javascript"><!--
$('.date').datetimepicker({
	language: '{{ datepicker }}',
	pickTime: false
});

$('.datetime').datetimepicker({
	language: '{{ datepicker }}',
	pickDate: true,
	pickTime: true
});

$('.time').datetimepicker({
	language: '{{ datepicker }}',
	pickDate: false
});
//--></script> 
<script type="text/javascript"><!--
$('select[name=\'country_id\']').on('change', function() {
	$.ajax({
		url: 'index.php?route=account/account/country&country_id=' + this.value,
		dataType: 'json',
		beforeSend: function() {
			$('select[name=\'country_id\']').prop('disabled', true);
		},
		complete: function() {
			$('select[name=\'country_id\']').prop('disabled', false);
		},
		success: function(json) {
			if (json['postcode_required'] == '1') {
				$('input[name=\'postcode\']').parent().parent().addClass('required');
			} else {
				$('input[name=\'postcode\']').parent().parent().removeClass('required');
			}
			
			html = '<option value="">{{ text_select }}</option>';
			
			if (json['zone'] && json['zone'] != '') {
				for (i = 0; i < json['zone'].length; i++) {
					html += '<option value="' + json['zone'][i]['zone_id'] + '"';
					
					if (json['zone'][i]['zone_id'] == '{{ zone_id }}') {
						html += ' selected="selected"';
					}
					
					html += '>' + json['zone'][i]['name'] + '</option>';
				}
			} else {
				html += '<option value="0" selected="selected">{{ text_none }}</option>';
			}
			
			$('select[name=\'zone_id\']').html(html);
		},
		error: function(xhr, ajaxOptions, thrownError) {
			alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
		}
	});
});

$('select[name=\'country_id\']').trigger('change');
//--></script> 
{{ footer }}